<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Test Environment</title>
	<link href="../node_modules/mocha/mocha.css" rel="stylesheet" />
</head>
<body>
	<div id="mocha"></div>
	<script src="../node_modules/mocha/mocha.js"></script>
	<script>
	var Coverager = require('./test_coverager.js');

	mocha.setup('bdd');
	mocha.reporter('list');

	var coverager = new Coverager();
	coverager.initCoverage('coverage/renderer', function(filename){ console.log(filename); return (filename.indexOf('dist') != -1); });
	</script>
	<script src="./main_action_test.js"></script>
	<script>
	var ipc = require('electron').ipcRenderer;

	console.log = function(){
		var args = Array.prototype.slice.call(arguments);
		ipc.send('log', args);
	}

	mocha.run(function(falilures){
		coverager.writeCoverage();
		ipc.send('renderer-test-result', falilures);
	});
	</script>
</body>
</html>
